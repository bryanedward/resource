CREATE TABLE IF NOT EXISTS users(
    iduser INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    nameuser text NOT NULL CHECK (nameuser <> ''),
    emailuser text NOT NULL,
    roleuser text NOT NULL,
    passuser text NOT NULL,
    photouser text NOT NULL

);

CREATE TABLE IF NOT EXISTS publications(
    idpublication INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    namepublication text NOT NULL CHECK (namepublication <> ''),
    descriptpublication text,
    levelsubject INTEGER NOT NULL,
    "userIduser" INTEGER REFERENCES users(iduser)
);


CREATE TABLE IF NOT EXISTS messages(
  idmessage INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  messageuser text NOT NULL CHECK (messageuser <> ''),
  "userIduser" INTEGER REFERENCES users(iduser),
  likepublication INTEGER NOT NULL,
  complemeints INTEGER NOT NULL,
  publicationid INTEGER REFERENCES publications(idpublication)
);



CREATE TABLE IF NOT EXISTS likes(
  idlike INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  "messageIdmessage" INTEGER REFERENCES messages(idmessage),
  "userIduser" INTEGER REFERENCES users(iduser)
);


CREATE TABLE IF NOT EXISTS complemeints(
  idcomplemeint INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  messageid INTEGER REFERENCES messages(idmessage),
  userid INTEGER REFERENCES users(iduser)
);




INSERT INTO users(nameUser,emailUser,passUser, roleUser)
VALUES ('Bryan','edwardbrian96@gmail.com','3893259','students');


-- INSERT TASKS DATA
INSERT INTO publications(namePublication,descriptPublication,levelsubject,"userIduser")
VALUES ('sequelize','como hacer join',1,4);


INSERT INTO messages(messageuser,"userIduser",likePublication,complemeints,publicationid)
VALUES ('se mas detallado',5,1,1,2);

INSERT INTO likes(idlike,"messageIdmessage","userIduser")
VALUES (2,1,4);

INSERT INTO complemeints(messageid,userid)
VALUES(1,4);
